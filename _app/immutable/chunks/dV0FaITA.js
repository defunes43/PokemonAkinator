import{f as F,a as H,c as Ce}from"./OA8WF4Wc.js";import{i as xe}from"./B0NmWs2p.js";import{o as Ae}from"./BeUKrdgB.js";import{b as we,i as Oe,n as Z,h as D,O as Te,j as $e,y as u,au as Re,k as Se,H as Ue,l as fe,o as N,f as J,V as Me,an as Ie,e as oe,s as je,c as De,a7 as He,aF as V,Z as ve,al as ye,aJ as Fe,aK as qe,r as _e,p as We,aL as Be,aM as Ke,aN as ee,d as ke,W as Ge,aO as Je,ak as Ve,aP as Qe,Q as ze,D as Ye,G as q,I as Xe,aw as I,M as S,J as T,K as O,F as te}from"./DvqBo_x_.js";import{s as z,e as W}from"./Ck5h0ypk.js";import{_ as Ze,i as ne}from"./CF3wVeiq.js";import{s as B}from"./CJMriMhS.js";function re(n,e){return e}function Ne(n,e,t){for(var a=n.items,s=[],r=e.length,i=0;i<r;i++)Je(e[i].e,s,!0);var d=r>0&&s.length===0&&t!==null;if(d){var y=t.parentNode;Ve(y),y.append(t),a.clear(),j(n,e[0].prev,e[r-1].next)}Qe(s,()=>{for(var b=0;b<r;b++){var C=e[b];d||(a.delete(C.k),j(n,C.prev,C.next)),ke(C.e,!d)}})}function se(n,e,t,a,s,r=null){var i=n,d={flags:e,items:new Map,first:null};{var y=n;i=D?Z(Te(y)):y.appendChild(we())}D&&$e();var b=null,C=!1,m=new Map,o=Re(()=>{var f=t();return Fe(f)?f:f==null?[]:ye(f)}),P,v;function g(){et(v,P,d,m,i,s,e,a,t),r!==null&&(P.length===0?b?_e(b):b=oe(()=>r(i)):b!==null&&We(b,()=>{b=null}))}Oe(()=>{v??=ze,P=u(o);var f=P.length;if(C&&f===0)return;C=f===0;let $=!1;if(D){var R=Se(i)===Ue;R!==(f===0)&&(i=fe(),Z(i),N(!1),$=!0)}if(D){for(var _=null,A,L=0;L<f;L++){if(J.nodeType===Me&&J.data===Ie){i=J,$=!0,N(!1);break}var p=P[L],h=a(p,L);A=le(J,d,_,null,p,h,L,s,e,t),d.items.set(h,A),_=A}f>0&&Z(fe())}if(D)f===0&&r&&(b=oe(()=>r(i)));else if(je()){var c=new Set,l=De;for(L=0;L<f;L+=1){p=P[L],h=a(p,L);var w=d.items.get(h)??m.get(h);w?Ee(w,p,L):(A=le(null,d,null,null,p,h,L,s,e,t,!0),m.set(h,A)),c.add(h)}for(const[k,E]of d.items)c.has(k)||l.skipped_effects.add(E.e);l.oncommit(g)}else g();$&&N(!0),u(o)}),D&&(i=J)}function et(n,e,t,a,s,r,i,d,y){var b=e.length,C=t.items,m=t.first,o=m,P,v=null,g=[],f=[],$,R,_,A;for(A=0;A<b;A+=1){if($=e[A],R=d($,A),_=C.get(R),_===void 0){var L=a.get(R);if(L!==void 0){a.delete(R),C.set(R,L);var p=v?v.next:o;j(t,v,L),j(t,L,p),ae(L,p,s),v=L}else{var h=o?o.e.nodes_start:s;v=le(h,t,v,v===null?t.first:v.next,$,R,A,r,i,y)}C.set(R,v),g=[],f=[],o=v.next;continue}if(Ee(_,$,A),(_.e.f&ee)!==0&&_e(_.e),_!==o){if(P!==void 0&&P.has(_)){if(g.length<f.length){var c=f[0],l;v=c.prev;var w=g[0],k=g[g.length-1];for(l=0;l<g.length;l+=1)ae(g[l],c,s);for(l=0;l<f.length;l+=1)P.delete(f[l]);j(t,w.prev,k.next),j(t,v,w),j(t,k,c),o=c,v=k,A-=1,g=[],f=[]}else P.delete(_),ae(_,o,s),j(t,_.prev,_.next),j(t,_,v===null?t.first:v.next),j(t,v,_),v=_;continue}for(g=[],f=[];o!==null&&o.k!==R;)(o.e.f&ee)===0&&(P??=new Set).add(o),f.push(o),o=o.next;if(o===null)continue;_=o}g.push(_),v=_,o=_.next}if(o!==null||P!==void 0){for(var E=P===void 0?[]:ye(P);o!==null;)(o.e.f&ee)===0&&E.push(o),o=o.next;var x=E.length;if(x>0){var U=b===0?s:null;Ne(t,E,U)}}n.first=t.first&&t.first.e,n.last=v&&v.e;for(var M of a.values())ke(M.e);a.clear()}function Ee(n,e,t,a){He(n.v,e),n.i=t}function le(n,e,t,a,s,r,i,d,y,b,C){var m=(y&Be)!==0,o=(y&Ke)===0,P=m?o?V(s,!1,!1):ve(s):s,v=(y&qe)===0?i:ve(i),g={i:v,v:P,k:r,a:null,e:null,prev:t,next:a};try{if(n===null){var f=document.createDocumentFragment();f.append(n=we())}return g.e=oe(()=>d(n,P,v,b),D),g.e.prev=t&&t.e,g.e.next=a&&a.e,t===null?C||(e.first=g):(t.next=g,t.e.next=g.e),a!==null&&(a.prev=g,a.e.prev=g.e),g}finally{}}function ae(n,e,t){for(var a=n.next?n.next.e.nodes_start:t,s=e?e.e.nodes_start:t,r=n.e.nodes_start;r!==null&&r!==a;){var i=Ge(r);s.before(r),r=i}}function j(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function tt(n,e){return n==null?null:String(n)}function he(n,e,t,a){var s=n.__style;if(D||s!==e){var r=tt(e);(!D||r!==n.getAttribute("style"))&&(r==null?n.removeAttribute("style"):n.style.cssText=r),n.__style=e}return a}async function nt(){const n=await fetch("/pokemons.json");if(!n.ok)throw new Error("Impossible de charger pokemons.json");return n.json()}var K;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(K||(K={}));class ie extends Error{constructor(e,t,a){super(e),this.message=e,this.code=t,this.data=a}}const rt=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},st=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},a=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:rt(n),r=()=>s()!=="web",i=m=>{const o=b.get(m);return!!(o?.platforms.has(s())||d(m))},d=m=>{var o;return(o=t.PluginHeaders)===null||o===void 0?void 0:o.find(P=>P.name===m)},y=m=>n.console.error(m),b=new Map,C=(m,o={})=>{const P=b.get(m);if(P)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),P.proxy;const v=s(),g=d(m);let f;const $=async()=>(!f&&v in o?f=typeof o[v]=="function"?f=await o[v]():f=o[v]:e!==null&&!f&&"web"in o&&(f=typeof o.web=="function"?f=await o.web():f=o.web),f),R=(c,l)=>{var w,k;if(g){const E=g?.methods.find(x=>l===x.name);if(E)return E.rtype==="promise"?x=>t.nativePromise(m,l.toString(),x):(x,U)=>t.nativeCallback(m,l.toString(),x,U);if(c)return(w=c[l])===null||w===void 0?void 0:w.bind(c)}else{if(c)return(k=c[l])===null||k===void 0?void 0:k.bind(c);throw new ie(`"${m}" plugin is not implemented on ${v}`,K.Unimplemented)}},_=c=>{let l;const w=(...k)=>{const E=$().then(x=>{const U=R(x,c);if(U){const M=U(...k);return l=M?.remove,M}else throw new ie(`"${m}.${c}()" is not implemented on ${v}`,K.Unimplemented)});return c==="addListener"&&(E.remove=async()=>l()),E};return w.toString=()=>`${c.toString()}() { [capacitor code] }`,Object.defineProperty(w,"name",{value:c,writable:!1,configurable:!1}),w},A=_("addListener"),L=_("removeListener"),p=(c,l)=>{const w=A({eventName:c},l),k=async()=>{const x=await w;L({eventName:c,callbackId:x},l)},E=new Promise(x=>w.then(()=>x({remove:k})));return E.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},E},h=new Proxy({},{get(c,l){switch(l){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?p:A;case"removeListener":return L;default:return _(l)}}});return a[m]=h,b.set(m,{name:m,proxy:h,platforms:new Set([...Object.keys(o),...g?[v]:[]])}),h};return t.convertFileSrc||(t.convertFileSrc=m=>m),t.getPlatform=s,t.handleError=y,t.isNativePlatform=r,t.isPluginAvailable=i,t.registerPlugin=C,t.Exception=ie,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},at=n=>n.Capacitor=st(n),ce=at(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ue=ce.registerPlugin;class Pe{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let a=!1;this.listeners[e]||(this.listeners[e]=[],a=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),a&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,t);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,a){const s=this.listeners[e];if(!s){if(a){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}return}s.forEach(r=>r(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:a=>{this.notifyListeners(t,a)}}}unimplemented(e="not implemented"){return new ce.Exception(e,K.Unimplemented)}unavailable(e="not available"){return new ce.Exception(e,K.Unavailable)}async removeListener(e,t){const a=this.listeners[e];if(!a)return;const s=a.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(a=>{this.notifyListeners(e,a)}))}}const me=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ge=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class it extends Pe{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[s,r]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=ge(s).trim(),r=ge(r).trim(),t[s]=r}),t}async setCookie(e){try{const t=me(e.key),a=me(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${a||""}${s}; path=${r}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ue("CapacitorCookies",{web:()=>new it});const ot=async n=>new Promise((e,t)=>{const a=new FileReader;a.onload=()=>{const s=a.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},a.onerror=s=>t(s),a.readAsDataURL(n)}),lt=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,r,i)=>(s[r]=n[e[i]],s),{})},ct=(n,e=!0)=>n?Object.entries(n).reduce((a,s)=>{const[r,i]=s;let d,y;return Array.isArray(i)?(y="",i.forEach(b=>{d=e?encodeURIComponent(b):b,y+=`${r}=${d}&`}),y.slice(0,-1)):(d=e?encodeURIComponent(i):i,y=`${r}=${d}`),`${a}&${y}`},"").substr(1):null,ut=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=lt(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[i,d]of Object.entries(n.data||{}))r.set(i,d);t.body=r.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const r=new FormData;if(n.data instanceof FormData)n.data.forEach((d,y)=>{r.append(y,d)});else for(const d of Object.keys(n.data))r.append(d,n.data[d]);t.body=r;const i=new Headers(t.headers);i.delete("content-type"),t.headers=i}else(s.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class dt extends Pe{async request(e){const t=ut(e,e.webFetchExtra),a=ct(e.params,e.shouldEncodeUrlParams),s=a?`${e.url}?${a}`:e.url,r=await fetch(s,t),i=r.headers.get("content-type")||"";let{responseType:d="text"}=r.ok?e:{};i.includes("application/json")&&(d="json");let y,b;switch(d){case"arraybuffer":case"blob":b=await r.blob(),y=await ot(b);break;case"json":y=await r.json();break;case"document":case"text":default:y=await r.text()}const C={};return r.headers.forEach((m,o)=>{C[o]=m}),{data:y,headers:C,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ue("CapacitorHttp",{web:()=>new dt});var pe;(function(n){n[n.Flush=0]="Flush",n[n.Add=1]="Add"})(pe||(pe={}));const ft=ue("TextToSpeech",{web:()=>Ze(()=>import("./3X3RxvHf.js"),[],import.meta.url).then(n=>new n.TextToSpeechWeb)});function be(n){const e=n.reduce((a,s)=>a+s.length,0);let t=0;for(const a of n){if(a.length===0)continue;const s=a.length/e;t-=s*Math.log2(s)}return t}function vt(n,e){const t=n.filter(r=>r.traits[e.key]===!0),a=n.filter(r=>r.traits[e.key]===!1),s=n.filter(r=>r.traits[e.key]===null);return be([n])-be([t,a,s])}function ht(n,e,t=.1){const a=e.map(r=>{const i=vt(n,r);return{question:r,ig:i*1}});console.log(a),a.sort((r,i)=>r.ig-i.ig);const s=a.slice(0,3);return s.length===0?null:s[Math.floor(Math.random()*s.length)].question}async function Y(n){const e=n.replace(/PokÃ©mon/g,"PoquÃ©mmone").replace(/pokÃ©mon/g,"PoquÃ©mmone");await ft.speak({text:e,lang:"fr-FR",rate:1,volume:1})}var mt=F('<div class="question-area svelte-1uha8ag"><p class="current-question-label svelte-1uha8ag"> </p> <button class="knopf btn-round btn-reecouter svelte-1uha8ag"><span aria-hidden="true">ğŸ”Š</span> RÃ©Ã©couter</button></div> <div class="answer-buttons svelte-1uha8ag"><button class="knopf btn-round btn-inconnu svelte-1uha8ag">â“ Je ne sais pas</button> <button class="knopf btn-round btn-non svelte-1uha8ag">âŒ Non</button> <button class="knopf btn-round btn-oui svelte-1uha8ag">âœ” Oui</button></div>',1),gt=F('<h2 class="result-message svelte-1uha8ag"> </h2> <button class="knopf btn-round btn-reset svelte-1uha8ag"><span aria-hidden="true">ğŸ”„</span> Recommencer</button>',1),pt=F('<li class="pokemon-item svelte-1uha8ag"><img class="pokemon-sprite svelte-1uha8ag"/></li>'),bt=F('<img class="removed-sprite svelte-1uha8ag"/>'),wt=F('<div class="removed-pokemons svelte-1uha8ag"><span class="removed-label svelte-1uha8ag">RetirÃ©s :</span> <div class="removed-sprites-container svelte-1uha8ag"></div></div>'),yt=F('<li class="asked-question-item svelte-1uha8ag"><p class="svelte-1uha8ag"> </p> <div class="question-actions svelte-1uha8ag"><button class="knopf btn-round btn-cancel svelte-1uha8ag"><span aria-hidden="true">â†©ï¸</span> Annuler</button></div> <!></li>'),_t=F('<main class="akinator-container svelte-1uha8ag"><header class="svelte-1uha8ag"><h1 class="svelte-1uha8ag"><span aria-hidden="true">ğŸ§ </span> PokÃ©mon Akinator</h1></header> <section class="game-section svelte-1uha8ag"><!></section> <hr/> <div class="status-sections svelte-1uha8ag"><section class="remaining-pokemons-section"><h3 class="svelte-1uha8ag"><span aria-hidden="true">ğŸ‘€</span> </h3> <ul class="pokemon-list svelte-1uha8ag"></ul></section> <section class="asked-questions-section"><h3 class="svelte-1uha8ag"><span aria-hidden="true">ğŸ“œ</span> Questions dÃ©jÃ  posÃ©es :</h3> <ul class="asked-questions-list svelte-1uha8ag"></ul></section></div></main>');function Ot(n,e){Ye(e,!1);let t=V([]),a=V([]),s=[],r=V(null),i=V("");Ae(async()=>{const p=await nt();I(t,p.pokemons),s=[...p.questions],b()});function d(p){if(!u(r))return;const{remaining:h,removed:c}=u(t).reduce((w,k)=>{const E=k.traits[u(r).key];return(p==="yes"?E===!0:p==="no"?E===!1:!0)?w.remaining.push(k):w.removed.push(k),w},{remaining:[],removed:[]});I(t,h);const l={...u(r),removedPokemon:c};I(a,[...u(a),l]),s=s.filter(w=>w.key!==u(r).key),b(),console.log(u(a))}function y(p){I(a,u(a).filter(h=>h.key!==p.key)),I(t,[...u(t),...p.removedPokemon]),s=[...s,p],b()}function b(){if(u(t).length===1){I(i,`Je pense que ton PokÃ©mon est ${u(t)[0].name} !`),I(r,null),Y(u(i));return}if(s.length===0||u(t).length===0){I(i,"Je ne suis pas sÃ»r... Il ne reste plus d'options."),I(r,null),Y(u(i));return}I(r,ht(u(t),s)),u(r)&&Y(u(r).label)}xe();var C=_t(),m=S(T(C),2),o=T(m);{var P=p=>{var h=mt(),c=te(h),l=T(c),w=T(l,!0);O(l);var k=S(l,2);O(c);var E=S(c,2),x=T(E),U=S(x,2),M=S(U,2);O(E),q(()=>z(w,u(r).label)),W("click",k,()=>{u(r)&&Y(u(r).label)}),W("click",x,()=>d("unknown")),W("click",U,()=>d("no")),W("click",M,()=>d("yes")),H(p,h)},v=p=>{var h=Ce(),c=te(h);{var l=w=>{var k=gt(),E=te(k),x=T(E,!0);O(E);var U=S(E,2);q(()=>z(x,u(i))),W("click",U,()=>window.location.reload()),H(w,k)};ne(c,w=>{u(i)&&w(l)},!0)}H(p,h)};ne(o,p=>{u(r)?p(P):p(v,!1)})}O(m);var g=S(m,4),f=T(g),$=T(f),R=S(T($));O($);var _=S($,2);se(_,5,()=>u(t),re,(p,h)=>{var c=pt(),l=T(c);O(c),q(()=>{he(c,`--p-color: ${u(h).color??""};`),B(l,"src",u(h).sprite),B(l,"alt",u(h).name),B(l,"title",u(h).name)}),H(p,c)}),O(_),O(f);var A=S(f,2),L=S(T(A),2);se(L,5,()=>u(a).slice().reverse(),re,(p,h)=>{var c=yt(),l=T(c),w=T(l,!0);O(l);var k=S(l,2),E=T(k);O(k);var x=S(k,2);{var U=M=>{var X=wt(),de=S(T(X),2);se(de,5,()=>u(h).removedPokemon,re,(Le,Q)=>{var G=bt();q(()=>{B(G,"src",u(Q).sprite),B(G,"alt",u(Q).name),B(G,"title",u(Q).name),he(G,`--p-color: ${u(Q).color??""};`)}),H(Le,G)}),O(de),O(X),H(M,X)};ne(x,M=>{u(h).removedPokemon.length>0&&M(U)})}O(c),q(()=>z(w,u(h).label)),W("click",E,()=>y(u(h))),H(p,c)}),O(L),O(A),O(g),O(C),q(()=>z(R,` PokÃ©mons restants (${u(t).length??""}) :`)),H(n,C),Xe()}export{Pe as W,Ot as _};
